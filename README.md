# ðŸŽï¸ Agentic 1brc challenge

> **Who writes the fastest Go code?** A face-off between AI models tackling the [One Billion Row Challenge](https://github.com/gunnarmorling/1brc).

## ðŸ“‹ The Challenge

The goal is simple but heavy: process a massive text file containing **1,000,000,000 rows** of temperature measurements and calculate the min, mean, and max temperature for each weather station.

**Input:** `Hamburg;12.0` (x 1 Billion)  
**Output:** `{Abha=5.0/18.0/27.4, Abidjan=15.7/26.0/34.1, ...}`

## ðŸ¤– The Contestants

We test two variations for each model:
1.  **Raw Prompt**: The model is given the standard challenge description.
2.  **With Hints**: The model is nudged to use advanced techniques (mmap, SIMD, concurrency, etc.).

## ðŸš€ Getting Started

### Prerequisites
- **Go** (1.24+)
- **Python 3** (for scripts)

### 1. Generate Data
First, you need the 1 billion row dataset. Be warned: this creates a **~13GB** file.

```bash
# Generate 1 Billion rows (takes a while)
python3 create_measurements.py 1_000_000_000
```

For quicker testing during development, you can generate smaller datasets:

```bash
# Generate 10 Million rows
python3 create_measurements.py 10_000_000
```

The script accepts an optional second argument for the output file path. If not provided, it defaults to `./data/measurements.txt`.

For quicker testing during development, you can generate smaller datasets:
```bash
# Generate 10 Million rows
python3 create_measurements.py 10_000_000
```

### 2. Run the Benchmark
Use the runner script to build and benchmark all implementations.

```bash
# Run on the generated file (defaults to data/medium.txt if not specified)
python3 run_all.py data/measurements.txt --runs 3
```

## ðŸ“‚ Project Structure

- `create_measurements.py`: Script to generate the massive dataset.
- `run_all.py`: Benchmark runner and verifier.
- `PROMPT.md`: The base system prompt used for the "Raw" implementations.
- `PROMPT_WITH_HINTS.md`: The prompt containing performance hints.
- `data/`: Stores the measurement files.
- `go-*/`: The various implementations generated by AI.

## ðŸ“Š Results

**Latest Benchmark Run:**

| Implementation | Input | Time (avg) |
|---|---|---|
| go-gemini3-with-hint | medium.txt | 91.5ms |
| go-opus4.5-with-hint | medium.txt | 146.2ms |
| go-opus4.5 | medium.txt | 174.7ms |
| go-haiku-4.5 | medium.txt | 195.1ms |
| go-gemini3 | medium.txt | 220.6ms |
| rust-opus4.5-with-hint | medium.txt | 314.9ms |
| rust-opus-4.5 | medium.txt | 393.7ms |
| go-gpt5.1 | medium.txt | 750.4ms |
| go-gpt5.1-with-hint | medium.txt | 783.5ms |
| go-opencode-grok-code-fast | medium.txt | 956.1ms |
| go-haiku-4.5-with-hint | medium.txt | 985.6ms |
| go-qwen-with-hint | medium.txt | 1.012s |
| go-opencode-grok-code-fast-with-hint | medium.txt | 1.056s |
| go-qwen | medium.txt | 1.059s |

---
*Based on the original [1BRC by Gunnar Morling](https://github.com/gunnarmorling/1brc).*

